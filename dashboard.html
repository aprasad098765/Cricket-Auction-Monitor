<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Auction Monitor</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- Auction Dashboard View -->
    <div class="dashboard-container" id="dashboard-view" style="display: block;">
        <header style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h1>Auction Dashboard</h1>
                <p>Manage teams and player assignments</p>
            </div>
            <div>
                <button onclick="window.location.href='index.html'" class="btn-secondary" style="margin-right: 0.5rem;"
                    title="Home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="vertical-align: middle;">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>
                <button id="public-view-btn" class="btn-secondary" style="margin-right: 0.5rem;">
                    Open Public View
                </button>
                <button id="copy-link-btn" class="btn-secondary" style="margin-right: 0.5rem;"
                    title="Copy link for local display">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="vertical-align: middle;">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                    </svg>
                </button>
                <button id="edit-pool-btn" class="btn-secondary" style="margin-right: 1rem;">
                    Edit Players
                </button>
                <button id="reset-btn" class="btn-secondary" style="color: #ef4444; border-color: rgba(239,68,68,0.3);">
                    Reset Auction
                </button>
            </div>
        </header>

        <!-- Spotlight Section -->
        <div id="spotlight-section" style="
            background: rgba(255, 255, 255, 0.03); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 20px; 
            padding: 2rem; 
            margin: 1.5rem 0; 
            text-align: center;
            position: relative;
            overflow: hidden;
        ">
            <h3 style="color: var(--text-secondary); margin-bottom: 1rem; font-weight: 300;">Current Player</h3>
            <div id="current-player-display" style="
                font-size: 3rem; 
                font-weight: 700; 
                background: linear-gradient(135deg, var(--primary-accent), var(--secondary-accent));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                margin-bottom: 1.5rem;
                min-height: 4.5rem;
            ">
                Ready to Start
            </div>

            <div style="display: flex; gap: 1rem; justify-content: center; align-items: center;">
                <button id="shuffle-btn" class="btn-primary" style="
                    font-size: 1.2rem;
                    padding: 1rem 2rem;
                ">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="margin-right: 0.5rem;">
                        <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l-5 5M4 4l5 5" />
                    </svg>
                    Bring Next Player
                </button>
                <button id="mark-unsold-btn" class="btn-secondary" style="
                    font-size: 1.2rem;
                    padding: 1rem 2rem;
                    border-color: #f59e0b;
                    color: #f59e0b;
                " disabled>
                    Mark Unsold
                </button>
            </div>
            <p id="shuffle-status" style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;"></p>
        </div>

        <div class="teams-grid" id="teams-grid">
            <!-- Team cards will be injected here -->
        </div>

        <div class="button-group" style="margin-top: 2rem; max-width: 300px;">
            <button type="button" id="dashboard-back-btn" class="btn-secondary">Back</button>
            <button type="button" class="btn-secondary" disabled
                style="opacity: 0.5; cursor: not-allowed;">Next</button>
        </div>
    </div>

    <!-- Add Player Modal -->
    <div id="add-player-modal" class="modal">
        <div class="modal-content">
            <h2>Add Player</h2>
            <form id="add-player-form">
                <input type="hidden" id="current-team-index">

                <div class="input-group">
                    <label for="player-name">Player Name</label>
                    <input type="text" id="player-name" required placeholder="e.g. Virat Kohli">
                </div>

                <div class="input-group">
                    <label for="player-price">Price (Credits)</label>
                    <input type="number" id="player-price" required min="1" placeholder="e.g. 50">
                </div>

                <div class="button-group">
                    <button type="button" class="btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn-primary">Add Player</button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Players Modal -->
    <div id="view-players-modal" class="modal">
        <div class="modal-content">
            <h2>Team Squad</h2>
            <div id="players-list" class="players-list">
                <!-- Players list injected here -->
            </div>
            <button type="button" class="btn-secondary close-modal"
                style="width: 100%; margin-top: 1rem;">Close</button>
        </div>
    </div>

    <!-- NEW: Edit Pool Modal -->
    <div id="edit-pool-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-modal">&times;</span>
            <h2 style="margin-bottom: 1rem;">Manage Player Pool</h2>

            <form id="add-new-player-form" style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem;">
                <input type="text" id="new-player-name" placeholder="Enter new player name" required
                    style="margin-bottom: 0;">
                <button type="submit" class="btn-primary" style="white-space: nowrap;">Add Player</button>
            </form>

            <div id="pool-management-list" style="
                max-height: 400px; 
                overflow-y: auto; 
                background: rgba(0,0,0,0.2); 
                border-radius: 8px; 
                padding: 0.5rem;
            ">
                <!-- Pool items injected here -->
            </div>

            <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
                * Locked players have already been sold and cannot be removed.
            </p>
        </div>
    </div>

    <!-- NEW: Round Complete Modal -->
    <div id="round-complete-modal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <h2>Round Complete!</h2>
            <p id="round-complete-msg" style="margin-bottom: 2rem; color: var(--text-secondary);">
                All players for this round have been shown.
            </p>
            <div class="button-group" style="flex-direction: column; gap: 1rem;">
                <button id="bid-unsold-btn" class="btn-primary" style="width: 100%;">
                    Bid Unsold Players (<span id="unsold-count-badge">0</span>)
                </button>
                <button id="complete-auction-btn" class="btn-secondary" style="width: 100%;">
                    Complete Auction
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>